name: cc-archive
summary: Manually archive/rotate sessions per retention rules
reads:
  - .specs/project.yml
writes:
  - .specs/archives/{slug}_{utc_id}.zip
  - .specs/features/{slug}/ (rotate sessions)
flow:
  - If feature not specified, use project.yml.flow.current
  - Zip older sessions; delete original dirs after success
  - Enforce retention (keep_open, keep_archives)
confirmations:
  - Deletion of original session directories
rollback:
  - Do not delete sources if zip failed
