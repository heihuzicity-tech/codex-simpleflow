name: cc-end
summary: Close the feature session, summarize and archive
reads:
  - .specs/current.yml
  - .specs/features/{slug}/requirements.md
  - .specs/features/{slug}/design.md
  - .specs/features/{slug}/tasks.md
writes:
  - .specs/features/{slug}/summary.md
  - .specs/archives/{slug}_{utc_id}.zip
  - .specs/index.yml
  - .specs/features/{slug}/sessions/{utc_id}/journal.md (append closing)
prechecks:
  - All tasks completed; design parity check passes
flow:
  - Validate completion and parity
  - Generate summary with metrics
  - Zip current session; rotate per retention
  - Update index and clear current pointer
confirmations:
  - Archive and cleanup actions
rollback:
  - If validation fails, stop and report gaps

